<!DOCTYPE html>
<!-- Build: 2025-01-17-16:30 -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Abundant City Policy Atlas</title>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/icon.svg">
    <link rel="alternate icon" href="/icon.svg">
    <!-- Material Design Icons and Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
    <!-- Mapbox -->
    <script src="https://cdn.jsdelivr.net/npm/mapbox-gl@2.15.0/dist/mapbox-gl.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/mapbox-gl@2.15.0/dist/mapbox-gl.css" rel="stylesheet">
    <script src="https://unpkg.com/supercluster@7.1.5/dist/supercluster.min.js"></script>
    <!-- Material Components Web - Load before inline scripts -->
    <script src="https://unpkg.com/material-components-web@14.0.0/dist/material-components-web.min.js"></script>
    <!-- noUiSlider CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.css">
    <!-- Custom styles (includes compiled Material Design with density) - Load after noUiSlider to override its defaults -->
    <link rel="stylesheet" href="/styles.css">

</head>
<body>
    <div class="container">
                <header>
            <div class="header-icon-wrapper">
                <img src="icon.svg" alt="" class="header-icon" aria-hidden="true">
            </div>
            <img src="banner.svg" alt="The Abundant City Policy Atlas - Changing Cities By Design" class="banner-img">
            <!-- Hidden text for accessibility -->
            <div class="sr-only">
                <h1>The Abundant City Policy Atlas</h1>
                <p>Changing Cities By Design</p>
            </div>
        </header>


        <div class="main-content">
                        <!-- SIDEBAR FILTERS -->
            <aside class="filters-panel">
                <h2 class="mdc-typography--headline6">Filters</h2>

                <!-- Policy Domain Filter (Multi-select Checkboxes) -->
                <div class="filter-group">
                    <div class="mdc-typography--subtitle2 filter-label">Policy Domain</div>
                    <div class="checkbox-group" id="reformTypeCheckboxes">
                        <!-- Populated by JavaScript from database -->
                    </div>
                </div>

                <!-- Level of Government Filter -->
                <div class="filter-group">
                    <div class="mdc-typography--subtitle2 filter-label">Level of Government</div>
                    <div class="checkbox-group">
                        <div class="mdc-form-field">
                            <div class="mdc-checkbox">
                                <input type="checkbox" class="mdc-checkbox__native-control placeTypeCheckbox" id="place-state" value="state">
                                <div class="mdc-checkbox__background">
                                    <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                                        <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path>
                                    </svg>
                                    <div class="mdc-checkbox__mixedmark"></div>
                                </div>
                                <div class="mdc-checkbox__ripple"></div>
                            </div>
                            <label for="place-state">State/Province/Territory</label>
                        </div>
                        <div class="mdc-form-field">
                            <div class="mdc-checkbox">
                                <input type="checkbox" class="mdc-checkbox__native-control placeTypeCheckbox" id="place-county" value="county">
                                <div class="mdc-checkbox__background">
                                    <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                                        <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path>
                                    </svg>
                                    <div class="mdc-checkbox__mixedmark"></div>
                                </div>
                                <div class="mdc-checkbox__ripple"></div>
                            </div>
                            <label for="place-county">Counties</label>
                        </div>
                        <div class="mdc-form-field">
                            <div class="mdc-checkbox">
                                <input type="checkbox" class="mdc-checkbox__native-control placeTypeCheckbox" id="place-city" value="city" checked="">
                                <div class="mdc-checkbox__background">
                                    <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                                        <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path>
                                    </svg>
                                    <div class="mdc-checkbox__mixedmark"></div>
                                </div>
                                <div class="mdc-checkbox__ripple"></div>
                            </div>
                            <label for="place-city">Cities</label>
                        </div>
                    </div>
                </div>

                <!-- Region/State Filter (Hierarchical) -->
                <div class="filter-group">
                    <div class="mdc-typography--subtitle2 filter-label">Location</div>
                    <div class="checkbox-group" id="locationCheckboxes">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Date Range Filter -->
                <div class="filter-group">
                    <div class="mdc-typography--subtitle2 filter-label">Adoption Date Range</div>
                    <div class="date-range-inputs">
                        <label class="mdc-text-field mdc-text-field--outlined mdc-text-field--no-label">
                            <span class="mdc-notched-outline">
                                <span class="mdc-notched-outline__leading"></span>
                                <span class="mdc-notched-outline__trailing"></span>
                            </span>
                            <input type="number" class="mdc-text-field__input" id="fromYear" placeholder="From" min="1900" max="2100">
                        </label>
                        <span class="date-range-separator">to</span>
                        <label class="mdc-text-field mdc-text-field--outlined mdc-text-field--no-label">
                            <span class="mdc-notched-outline">
                                <span class="mdc-notched-outline__leading"></span>
                                <span class="mdc-notched-outline__trailing"></span>
                            </span>
                            <input type="number" class="mdc-text-field__input" id="toYear" placeholder="To" min="1900" max="2100">
                    </label>
                    </div>
                    <div class="mdc-form-field date-checkbox-wrapper">
                        <div class="mdc-checkbox">
                            <input type="checkbox" class="mdc-checkbox__native-control" id="includeUnknownDates" checked="">
                            <div class="mdc-checkbox__background">
                                <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                                    <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path>
                                </svg>
                                <div class="mdc-checkbox__mixedmark"></div>
                            </div>
                            <div class="mdc-checkbox__ripple"></div>
                        </div>
                        <label for="includeUnknownDates">Include unknown dates</label>
                    </div>
                </div>

                <!-- Status Filter -->
                <div class="filter-group">
                    <div class="mdc-typography--subtitle2 filter-label">Reform Status</div>
                    <div class="checkbox-group">
                        <div class="mdc-form-field">
                            <div class="mdc-checkbox">
                                <input type="checkbox" class="mdc-checkbox__native-control statusCheckbox" id="status-adopted" value="adopted" checked="">
                                <div class="mdc-checkbox__background">
                                    <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                                        <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path>
                                    </svg>
                                    <div class="mdc-checkbox__mixedmark"></div>
                                </div>
                                <div class="mdc-checkbox__ripple"></div>
                            </div>
                            <label for="status-adopted">Adopted</label>
                        </div>
                        <div class="mdc-form-field">
                            <div class="mdc-checkbox">
                                <input type="checkbox" class="mdc-checkbox__native-control statusCheckbox" id="status-proposed" value="proposed">
                                <div class="mdc-checkbox__background">
                                    <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                                        <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path>
                                    </svg>
                                    <div class="mdc-checkbox__mixedmark"></div>
                                </div>
                                <div class="mdc-checkbox__ripple"></div>
                            </div>
                            <label for="status-proposed">Proposed</label>
                        </div>
                        <div class="mdc-form-field">
                            <div class="mdc-checkbox">
                                <input type="checkbox" class="mdc-checkbox__native-control statusCheckbox" id="status-failed" value="failed">
                                <div class="mdc-checkbox__background">
                                    <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                                        <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path>
                                    </svg>
                                    <div class="mdc-checkbox__mixedmark"></div>
                                </div>
                                <div class="mdc-checkbox__ripple"></div>
                            </div>
                            <label for="status-failed">Failed</label>
                        </div>
                    </div>
                </div>

                <!-- Population Filter (Range Slider) -->
                <div class="filter-group">
                    <div class="mdc-typography--subtitle2 filter-label">Population Range</div>
                    <div id="populationSlider" class="population-slider"></div>
                        <div class="slider-values">
                        <span id="populationRangeLabel" class="mdc-typography--caption">0 to 20,000,000</span>
                    </div>
                </div>

                <!-- Limitations Filter -->
                <div class="filter-group">
                    <div class="mdc-typography--subtitle2 filter-label">Limitations</div>
                    <div class="limitations-filter-group">
                        <!-- Scope Limitations -->
                        <div class="limitation-filter-item">
                            <div class="mdc-typography--caption limitation-filter-label">Scope</div>
                            <div class="limitation-radio-group">
                                <label class="mdc-form-field limitation-radio-option">
                                    <div class="mdc-radio">
                                        <input class="mdc-radio__native-control" type="radio" name="scope-limitation" id="scope-all" value="all" checked="">
                                        <div class="mdc-radio__background">
                                            <div class="mdc-radio__outer-circle"></div>
                                            <div class="mdc-radio__inner-circle"></div>
                                        </div>
                                        <div class="mdc-radio__ripple"></div>
                                    </div>
                                    <label for="scope-all">All</label>
                                </label>
                                <label class="mdc-form-field limitation-radio-option">
                                    <div class="mdc-radio">
                                        <input class="mdc-radio__native-control" type="radio" name="scope-limitation" id="scope-no-limits" value="no_limits">
                                        <div class="mdc-radio__background">
                                            <div class="mdc-radio__outer-circle"></div>
                                            <div class="mdc-radio__inner-circle"></div>
                                        </div>
                                        <div class="mdc-radio__ripple"></div>
                                    </div>
                                    <label for="scope-no-limits">No limits</label>
                                </label>
                                <label class="mdc-form-field limitation-radio-option">
                                    <div class="mdc-radio">
                                        <input class="mdc-radio__native-control" type="radio" name="scope-limitation" id="scope-has-limits" value="has_limits">
                                        <div class="mdc-radio__background">
                                            <div class="mdc-radio__outer-circle"></div>
                                            <div class="mdc-radio__inner-circle"></div>
                                        </div>
                                        <div class="mdc-radio__ripple"></div>
                                    </div>
                                    <label for="scope-has-limits">Has limits</label>
                                </label>
                            </div>
                        </div>

                        <!-- Land Use Limitations -->
                        <div class="limitation-filter-item">
                            <div class="mdc-typography--caption limitation-filter-label">Land Use</div>
                            <div class="limitation-radio-group">
                                <label class="mdc-form-field limitation-radio-option">
                                    <div class="mdc-radio">
                                        <input class="mdc-radio__native-control" type="radio" name="landuse-limitation" id="landuse-all" value="all" checked="">
                                        <div class="mdc-radio__background">
                                            <div class="mdc-radio__outer-circle"></div>
                                            <div class="mdc-radio__inner-circle"></div>
                                        </div>
                                        <div class="mdc-radio__ripple"></div>
                                    </div>
                                    <label for="landuse-all">All</label>
                                </label>
                                <label class="mdc-form-field limitation-radio-option">
                                    <div class="mdc-radio">
                                        <input class="mdc-radio__native-control" type="radio" name="landuse-limitation" id="landuse-all-uses" value="no_limits">
                                        <div class="mdc-radio__background">
                                            <div class="mdc-radio__outer-circle"></div>
                                            <div class="mdc-radio__inner-circle"></div>
                                        </div>
                                        <div class="mdc-radio__ripple"></div>
                                    </div>
                                    <label for="landuse-all-uses">All uses</label>
                                </label>
                                <label class="mdc-form-field limitation-radio-option">
                                    <div class="mdc-radio">
                                        <input class="mdc-radio__native-control" type="radio" name="landuse-limitation" id="landuse-has-limits" value="has_limits">
                                        <div class="mdc-radio__background">
                                            <div class="mdc-radio__outer-circle"></div>
                                            <div class="mdc-radio__inner-circle"></div>
                                        </div>
                                        <div class="mdc-radio__ripple"></div>
                                    </div>
                                    <label for="landuse-has-limits">Has limits</label>
                                </label>
                            </div>
                        </div>

                        <!-- Requirements Limitations -->
                        <div class="limitation-filter-item">
                            <div class="mdc-typography--caption limitation-filter-label">Requirements</div>
                            <div class="limitation-radio-group">
                                <label class="mdc-form-field limitation-radio-option">
                                    <div class="mdc-radio">
                                        <input class="mdc-radio__native-control" type="radio" name="requirements-limitation" id="requirements-all" value="all" checked="">
                                        <div class="mdc-radio__background">
                                            <div class="mdc-radio__outer-circle"></div>
                                            <div class="mdc-radio__inner-circle"></div>
                                        </div>
                                        <div class="mdc-radio__ripple"></div>
                                    </div>
                                    <label for="requirements-all">All</label>
                                </label>
                                <label class="mdc-form-field limitation-radio-option">
                                    <div class="mdc-radio">
                                        <input class="mdc-radio__native-control" type="radio" name="requirements-limitation" id="requirements-by-right" value="no_limits">
                                        <div class="mdc-radio__background">
                                            <div class="mdc-radio__outer-circle"></div>
                                            <div class="mdc-radio__inner-circle"></div>
                                        </div>
                                        <div class="mdc-radio__ripple"></div>
                                    </div>
                                    <label for="requirements-by-right">By right</label>
                                </label>
                                <label class="mdc-form-field limitation-radio-option">
                                    <div class="mdc-radio">
                                        <input class="mdc-radio__native-control" type="radio" name="requirements-limitation" id="requirements-discretionary" value="has_limits">
                                        <div class="mdc-radio__background">
                                            <div class="mdc-radio__outer-circle"></div>
                                            <div class="mdc-radio__inner-circle"></div>
                                        </div>
                                        <div class="mdc-radio__ripple"></div>
                                    </div>
                                    <label for="requirements-discretionary">Discretionary</label>
                                </label>
                            </div>
                        </div>

                        <!-- Intensity Limitations -->
                        <div class="limitation-filter-item">
                            <div class="mdc-typography--caption limitation-filter-label">Intensity</div>
                            <div class="limitation-radio-group">
                                <label class="mdc-form-field limitation-radio-option">
                                    <div class="mdc-radio">
                                        <input class="mdc-radio__native-control" type="radio" name="intensity-limitation" id="intensity-all" value="all" checked="">
                                        <div class="mdc-radio__background">
                                            <div class="mdc-radio__outer-circle"></div>
                                            <div class="mdc-radio__inner-circle"></div>
                                        </div>
                                        <div class="mdc-radio__ripple"></div>
                                    </div>
                                    <label for="intensity-all">All</label>
                                </label>
                                <label class="mdc-form-field limitation-radio-option">
                                    <div class="mdc-radio">
                                        <input class="mdc-radio__native-control" type="radio" name="intensity-limitation" id="intensity-complete" value="no_limits">
                                        <div class="mdc-radio__background">
                                            <div class="mdc-radio__outer-circle"></div>
                                            <div class="mdc-radio__inner-circle"></div>
                                        </div>
                                        <div class="mdc-radio__ripple"></div>
                                    </div>
                                    <label for="intensity-complete">Complete</label>
                                </label>
                                <label class="mdc-form-field limitation-radio-option">
                                    <div class="mdc-radio">
                                        <input class="mdc-radio__native-control" type="radio" name="intensity-limitation" id="intensity-partial" value="has_limits">
                                        <div class="mdc-radio__background">
                                            <div class="mdc-radio__outer-circle"></div>
                                            <div class="mdc-radio__inner-circle"></div>
                                        </div>
                                        <div class="mdc-radio__ripple"></div>
                                    </div>
                                    <label for="intensity-partial">Partial</label>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="filter-buttons">
                    <button class="mdc-button mdc-button--raised" id="applyFilters">
                        <span class="mdc-button__ripple"></span>
                        <span class="mdc-button__label">Apply Filters</span>
                    </button>
                    <button class="mdc-button mdc-button--outlined" id="resetFilters">
                        <span class="mdc-button__ripple"></span>
                        <span class="mdc-button__label">Reset</span>
                    </button>
                    <button class="mdc-button mdc-button--outlined" id="shareSearch">
                        <span class="mdc-button__ripple"></span>
                        <i class="material-icons mdc-button__icon" aria-hidden="true">link</i>
                        <span class="mdc-button__label">Share</span>
                    </button>
                </div>
            </aside>


            <div class="content-area">
                        <!-- MAIN CONTENT -->
                <!-- Error Banner -->
                <div id="errorMessage" class="mdc-banner mdc-banner--error container-hidden" role="banner">
                    <div class="mdc-banner__content" role="status" aria-live="assertive">
                        <div class="mdc-banner__text"></div>
                        <div class="mdc-banner__actions">
                            <button class="mdc-button mdc-banner__action" type="button" id="dismissError">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label">Dismiss</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Snackbar for toast notifications -->
                <div id="snackbar" class="mdc-snackbar" aria-live="assertive" aria-atomic="true" aria-hidden="true">
                    <div class="mdc-snackbar__surface">
                        <div class="mdc-snackbar__label" role="status" aria-atomic="true"></div>
                        <div class="mdc-snackbar__actions">
                            <button class="mdc-icon-button mdc-snackbar__action" type="button" aria-label="Close">
                                <i class="material-icons mdc-icon-button__icon">close</i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- View Tabs -->
                <div class="mdc-tab-bar" role="tablist">
                    <div class="mdc-tab-scroller">
                        <div class="mdc-tab-scroller__scroll-area">
                            <div class="mdc-tab-scroller__scroll-content">
                                <button class="mdc-tab mdc-tab--active" role="tab" aria-selected="true" tabindex="0" id="listViewTab">
                                    <span class="mdc-tab__content">
                                        <span class="mdc-tab__icon material-icons" aria-hidden="true">list</span>
                                        <span class="mdc-tab__text-label">List</span>
                                    </span>
                                    <span class="mdc-tab-indicator mdc-tab-indicator--active">
                                        <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                                    </span>
                                    <span class="mdc-tab__ripple"></span>
                                </button>
                                <button class="mdc-tab" role="tab" aria-selected="false" tabindex="-1" id="mapViewTab">
                                    <span class="mdc-tab__content">
                                        <span class="mdc-tab__icon material-icons" aria-hidden="true">map</span>
                                        <span class="mdc-tab__text-label">Map</span>
                                    </span>
                                    <span class="mdc-tab-indicator">
                                        <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                                    </span>
                                    <span class="mdc-tab__ripple"></span>
                                </button>
                                <button class="mdc-tab" role="tab" aria-selected="false" tabindex="-1" id="explorePlacesViewTab">
                                    <span class="mdc-tab__content">
                                        <span class="mdc-tab__icon material-icons" aria-hidden="true">explore</span>
                                        <span class="mdc-tab__text-label">Explore Places</span>
                                    </span>
                                    <span class="mdc-tab-indicator">
                                        <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                                    </span>
                                    <span class="mdc-tab__ripple"></span>
                                </button>
                                <button class="mdc-tab" role="tab" aria-selected="false" tabindex="-1" id="aboutViewTab">
                                    <span class="mdc-tab__content">
                                        <span class="mdc-tab__icon material-icons" aria-hidden="true">info</span>
                                        <span class="mdc-tab__text-label">About</span>
                                    </span>
                                    <span class="mdc-tab-indicator">
                                        <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                                    </span>
                                    <span class="mdc-tab__ripple"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Results Info Banner -->
                <div id="resultsInfo" class="mdc-banner container-hidden" role="banner">
                    <div class="mdc-banner__content" role="status" aria-live="polite">
                        <div class="mdc-banner__text">
                            Found <strong id="resultCount">0</strong> reforms matching your filters
                        </div>
                        <div class="mdc-banner__actions">
                            <button class="mdc-icon-button mdc-banner__action" id="downloadBannerBtn" title="Download spreadsheet">
                                <i class="material-icons mdc-icon-button__icon">download</i>
                            </button>
                            <button class="mdc-icon-button mdc-banner__action" id="shareBannerBtn" title="Share this search">
                                <i class="material-icons mdc-icon-button__icon">link</i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Loading Spinner -->
                <div id="loadingSpinner" class="loading container-hidden">
                    <div class="mdc-circular-progress" style="width:48px;height:48px;" role="progressbar" aria-label="Loading reforms" aria-valuemin="0" aria-valuemax="1">
                        <div class="mdc-circular-progress__determinate-container">
                            <svg class="mdc-circular-progress__determinate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                <circle class="mdc-circular-progress__determinate-track" cx="24" cy="24" r="18" stroke-width="4"></circle>
                                <circle class="mdc-circular-progress__determinate-circle" cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="113.097" stroke-width="4"></circle>
                            </svg>
                        </div>
                        <div class="mdc-circular-progress__indeterminate-container">
                            <div class="mdc-circular-progress__spinner-layer">
                                <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left">
                                    <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="4"></circle>
                                    </svg>
                                </div>
                                <div class="mdc-circular-progress__gap-patch">
                                    <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="3.2"></circle>
                                    </svg>
                                </div>
                                <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right">
                                    <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="4"></circle>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="mdc-typography--body1">Loading reforms...</p>
                </div>


                            <!-- LIST VIEW -->
                <div id="listView" class="view-container active">
                    <div id="reformsList" class="reforms-list"></div>
                    <div id="noResultsList" class="no-results container-hidden">
                        <h3 class="mdc-typography--headline6">No Reforms Found</h3>
                        <p class="mdc-typography--body1">Try adjusting your filters to see more results.</p>
                    </div>
                </div>


                            <!-- MAP VIEW -->
                <div id="mapView" class="view-container">
                    <div id="map"></div>
                    <button class="mdc-icon-button map-print-button" id="printMapButton" title="Print map" aria-label="Print map">
                        <i class="material-icons mdc-icon-button__icon">print</i>
                    </button>
                    <div id="mapOverlay" class="map-overlay mdc-card">
                        <button class="mdc-icon-button map-overlay-close" id="closeOverlay">
                            <i class="material-icons mdc-icon-button__icon">close</i>
                        </button>
                        <div class="map-overlay-header mdc-typography--headline6" id="overlayHeader"></div>
                        <div id="overlayCards" class="reforms-list"></div>
                    </div>
                </div>


                            <!-- EXPLORE PLACES VIEW -->
                <div id="explorePlacesView" class="view-container">
                    <!-- Explore Places List View -->
                    <div id="explorePlacesListView" class="explore-places-list-view">
                        <div class="container">
                            <h2 class="mdc-typography--headline4">Explore Places</h2>
                            
                            <!-- Search Bar -->
                            <div class="explore-places-search">
                                <div class="mdc-text-field mdc-text-field--outlined">
                                    <input type="text" class="mdc-text-field__input" id="explorePlacesSearchInput" placeholder="Search for a city, county, or state...">
                                    <div class="mdc-notched-outline">
                                        <div class="mdc-notched-outline__leading"></div>
                                        <div class="mdc-notched-outline__notch">
                                        </div>
                                        <div class="mdc-notched-outline__trailing"></div>
                                    </div>
                                </div>
                                <div id="explorePlacesSearchResults" class="explore-places-search-results container-hidden"></div>
                            </div>

                            <!-- Movers and Shakers -->
                            <div class="top-ten-lists">
                                <h3 class="mdc-typography--headline5">Movers and Shakers</h3>
                                <p class="mdc-typography--body2" style="color:#95a5a6; margin-top: 8px;">
                                    Some of the jurisdicitons with the most reform activity matching your filters!
                                </p>

                                <div id="moversSections" class="movers-sections"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Policy Profile Detail View -->
                    <div id="policyProfileDetailView" class="policy-profile-detail-view container-hidden">
                        <div class="container">
                            <button class="mdc-button mdc-button--outlined" id="backToExplorePlaces">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label">‚Üê Back to Explore Places</span>
                            </button>
                            <div id="policyProfileDetailContent"></div>
                        </div>
                    </div>
                </div>


                            <!-- ABOUT VIEW -->
                <div id="aboutView" class="view-container">
                    <div class="about-content">
                        <h2>Our Mission</h2>
                        <p>
                            In the last decade plus, a major new political force has emerged in North America, the English-speaking world, and beyond. 
                            This loosely linked movement advocates for more housing, better cities, and related policies. It works at all levels of governement, from small town city halls to national governments. 
                            Within this movement, there are tens of thousands of individuals and thousands of organizations working on related but distinct policies. 
                            A matrix emerges of policy domains to reform and jurisdictions to target. This Atlas is a tool to track and display the spread of these policies across the country, giving
                            placed-based advocates a method to identify future targets for action that have succeeded in comparable locations.  
                        </p>
                        <h2>Our Data Sources</h2>
                        <p>
                            </p><p>Each partner we source our reforms through specializes in either a poarticular policy domain or a particular level of government. We then unify the data they provide into a single format,
                                match any duplicate policies tracked by multiple organizations, and enrich the data with additional details. We cannot thank our partners enough, as without them, this project could not exist.
                                </p>                        
                                <p></p>
                        <p>
                            These organizations are at the forefront of tracking how cities are changing their land use policies to enable 
                            more housing, reduce parking requirements, and create more livable communities. Their work makes this atlas possible, 
                            and we're proud to highlight their contributions to the movement for abundant, accessible cities.
                        </p>

                        <div id="sourcesLoading" class="loading">
                            <div class="mdc-circular-progress" style="width:48px;height:48px;margin:0 auto;" role="progressbar" aria-label="Loading sources" aria-valuemin="0" aria-valuemax="1">
                                <div class="mdc-circular-progress__determinate-container">
                                    <svg class="mdc-circular-progress__determinate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                        <circle class="mdc-circular-progress__determinate-track" cx="24" cy="24" r="18" stroke-width="4"></circle>
                                        <circle class="mdc-circular-progress__determinate-circle" cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="113.097" stroke-width="4"></circle>
                                    </svg>
                                </div>
                                <div class="mdc-circular-progress__indeterminate-container">
                                    <div class="mdc-circular-progress__spinner-layer">
                                        <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left">
                                            <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="4"></circle>
                                            </svg>
                                        </div>
                                        <div class="mdc-circular-progress__gap-patch">
                                            <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="3.2"></circle>
                                            </svg>
                                        </div>
                                        <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right">
                                            <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="4"></circle>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p class="mdc-typography--body1" style="margin-top: 16px;">Loading sources...</p>
                        </div>

                        <div id="sourcesError" class="error container-hidden" style="display: none;"></div>

                        <div id="sourcesGrid" class="sources-grid container-hidden" style="display: none;"></div>


                        <h2>Policy Domains</h2>
                        <p>
                            The atlas tracks a range of housing and zoning reforms across multiple policy domains. 
                            Each reform type represents a specific policy change that enables more housing, reduces barriers to development, 
                            or creates more livable communities. Over time, we hope to broaden the range of reforms tracked, and produce more fine-grained details 
                            on the existing domains.
                        </p>

                        <div id="reformTypesLoading" class="loading">
                            <div class="mdc-circular-progress" style="width:48px;height:48px;margin:0 auto;" role="progressbar" aria-label="Loading categories" aria-valuemin="0" aria-valuemax="1">
                                <div class="mdc-circular-progress__determinate-container">
                                    <svg class="mdc-circular-progress__determinate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                        <circle class="mdc-circular-progress__determinate-track" cx="24" cy="24" r="18" stroke-width="4"></circle>
                                        <circle class="mdc-circular-progress__determinate-circle" cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="113.097" stroke-width="4"></circle>
                                    </svg>
                                </div>
                                <div class="mdc-circular-progress__indeterminate-container">
                                    <div class="mdc-circular-progress__spinner-layer">
                                        <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left">
                                            <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="4"></circle>
                                            </svg>
                                        </div>
                                        <div class="mdc-circular-progress__gap-patch">
                                            <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="3.2"></circle>
                                            </svg>
                                        </div>
                                        <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right">
                                            <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="4"></circle>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p class="mdc-typography--body1" style="margin-top: 16px;">Loading categories...</p>
                        </div>

                        <div id="reformTypesError" class="error container-hidden" style="display: none;"></div>

                        <div id="reformTypesGrid" class="sources-grid container-hidden" style="display: none;"></div>

                        <h2>How to Contribute</h2>
                        
                        <h3>Report a New Reform or change to an existing reform</h3>
                        <p>The Atlas doesn't collect data itself, but through our partner organizations. If you know of a reform that's not on the map, identify
                            which of the partners would be good places to track this reform, then view the data in that tracker and follow that tracker's submission policy:
                        </p>
                        <ol>
                            <li><strong>For parking reforms:</strong> Submit to the <a href="https://parkingreform.org/" target="_blank">Parking Reform Network</a></li>
                            <li><strong>For building code reforms:</strong> Submit to the <a href="https://centerforbuilding.org/" target="_blank">Center for Building in North America</a></li>
                            <li><strong>For zoning reforms:</strong> Check if it's already tracked by <a href="https://belonging.berkeley.edu/zoning-reform-tracker" target="_blank">Berkeley's Zoning Reform Tracker</a></li>
                        </ol>

                        <h3>Improve the Atlas</h3>
                        <p>The code for the tlas is open source. You can contribute bug reports, bug fixes, feature requests, or new features via <a href="https://github.com/dkesh/urbanist-reform-map/issues">GitHub issues</a>.

                        </p><p>
                            For more general questions reach out to the project's author at <a href="mailto:dan@austinonyourfeet.org">dan@austinonyourfeet.org</a>.
                        </p>


                        <h2>Our Team</h2>
                        <div class="biography">
                            <div class="biography-content">
                                <p>
                                    The Abundant City Policy Atlas was created by <strong>Dan Keshet</strong>, a longtime advocate for 
                                    abundant cities and evidence-based housing policy. Dan has been at the forefront of 
                                    the urbanist movement in Texas and beyond, working to make cities more livable, affordable, and 
                                    sustainable through policy reform and data-driven advocacy.
                                </p>
                                <p>
                                    Dan was a co-founder of <a href="http://aura-atx.org">AURA</a>, a grassroots organization that 
                                    has been instrumental in promoting inclusive and sustainable urban development in Austin. 
                                    AURA has helped guide significant reforms to Austin's land use policy.
                                    Dan also founded <a href="http://texasforhousing.org">Texans for Housing</a>, an 
                                    organization dedicated to advocating for legislative changes that eliminate obstacles to Texans living
                                    in the places they want to live.
                                </p>
                            </div>
                        </div>

                        <h2>License & Terms</h2>
                        <p>
                            This map and its underlying data are provided for informational purposes only. While we strive for accuracy, we make no guarantees about the completeness or correctness of the information presented.
                            Indeed, the atlas is a long way from comprehensive today, but we're working on it.
                        </p>
                        <p>
                            Data from our sources remains subject to their respective licenses and terms of use. Please consult those organizations for authoritative information.
                        </p>
                    </div>
                </div>

            </div>
        </div>
    </div>

        <!-- noUiSlider JS - must load before slider.js -->
    <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.js"></script>
    <!-- JavaScript modules - loaded in dependency order -->
    <script src="/js/helpers.js"></script>
    <script src="/js/state.js"></script>
    <script src="/js/ui-elements.js"></script>
    <script src="/js/slider.js"></script>
    <script src="/js/filters.js"></script>
    <script src="/js/filter-config.js"></script>
    <script src="/js/ui.js"></script>
    <script src="/js/reforms.js"></script>
    <script src="/js/map.js"></script>
    <script src="/js/share.js"></script>
    <script src="/js/events.js"></script>
    <script src="/js/explore-places.js"></script>
    <script src="/js/policy-profile-detail.js"></script>
    <script src="/js/init.js"></script>



</body></html>